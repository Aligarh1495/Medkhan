{% extends 'products/base.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/style8.css' %}">
{% endblock %}

{% block content %}
<!-- Секция специалистов -->
<section class="specialists-section" id="specialists">
    <div class="container">
        <div class="breadcrumbs">
            <a href="{% url 'main' %}">Главная</a> / <span>Специалисты</span>
        </div>

        <div class="section-header">
            <h1>Команда специалистов</h1>
            <div class="filters">
                <div class="filter-dropdown">
                    <select id="gender-filter">
                        <option value="">Пол</option>
                        <option value="male">Мужчина</option>
                        <option value="female">Женщина</option>
                    </select>
                </div>
                <div class="filter-dropdown">
                    <select id="specialization-filter">
                        <option value="">Специализация</option>
                        <option value="neurologist">Невролог</option>
                        <option value="urologist">Уролог</option>
                        <option value="gynecologist">Гинеколог</option>
                        <option value="therapist">Терапевт</option>
                        <option value="surgeon">Хирург</option>
                        <option value="proctologist">Проктолог</option>
                    </select>
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Поиск" id="doctor-search">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 16C13.4183 16 17 12.4183 17 8C17 3.58172 13.4183 0 9 0C4.58172 0 1 3.58172 1 8C1 12.4183 4.58172 16 9 16Z" stroke="#999999" stroke-width="2"/>
                        <path d="M15 14L19 18" stroke="#999999" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Алфавитный фильтр -->
        <div class="alphabet-filter">
            <button class="alphabet-btn active" data-letter="">Уролог</button>
            <button class="alphabet-btn" data-letter="">Все</button>
            <button class="alphabet-btn" data-letter="А">А</button>
            <button class="alphabet-btn" data-letter="Б">Б</button>
            <button class="alphabet-btn" data-letter="В">В</button>
            <button class="alphabet-btn" data-letter="Г">Г</button>
            <button class="alphabet-btn" data-letter="Д">Д</button>
            <button class="alphabet-btn" data-letter="Е">Е</button>
            <button class="alphabet-btn" data-letter="Ж">Ж</button>
            <button class="alphabet-btn" data-letter="З">З</button>
            <button class="alphabet-btn" data-letter="И">И</button>
            <button class="alphabet-btn" data-letter="К">К</button>
            <button class="alphabet-btn" data-letter="Л">Л</button>
            <button class="alphabet-btn" data-letter="М">М</button>
            <button class="alphabet-btn" data-letter="Н">Н</button>
            <button class="alphabet-btn" data-letter="О">О</button>
            <button class="alphabet-btn" data-letter="П">П</button>
            <button class="alphabet-btn" data-letter="Р">Р</button>
            <button class="alphabet-btn" data-letter="С">С</button>
            <button class="alphabet-btn" data-letter="Т">Т</button>
            <button class="alphabet-btn" data-letter="У">У</button>
            <button class="alphabet-btn" data-letter="Ф">Ф</button>
            <button class="alphabet-btn" data-letter="Х">Х</button>
            <button class="alphabet-btn" data-letter="Ц">Ц</button>
            <button class="alphabet-btn" data-letter="Ч">Ч</button>
            <button class="alphabet-btn" data-letter="Ш">Ш</button>
            <button class="alphabet-btn" data-letter="Щ">Щ</button>
            <button class="alphabet-btn" data-letter="Ъ">Ъ</button>
            <button class="alphabet-btn" data-letter="Ы">Ы</button>
            <button class="alphabet-btn" data-letter="Ь">Ь</button>
            <button class="alphabet-btn" data-letter="Э">Э</button>
            <button class="alphabet-btn" data-letter="Ю">Ю</button>
            <button class="alphabet-btn" data-letter="Я">Я</button>
        </div>

        <div class="specialists-grid">
            <div class="specialist-card" data-gender="female" data-specialization="neurologist">
                <div class="specialist-image">
                    <a href="{% url 'NudelmanNatalia' %}">
                        <img src="{% static 'images/specialist-1.png' %}" alt="Нудельман Наталия Федоровна">
                        <div class="experience-badge">Стаж 31 год</div>
                    </a>

                </div>
                <div class="specialist-info">
                    <h3>Нудельман<br>Наталия Федоровна</h3>
                    <p class="specialist-position">Врач-невролог</p>
                    <button class="btn btn-primary appointment-btn" onclick="openAppointmentModal(this)">Записаться</button>
                </div>
            </div>

            <div class="specialist-card" data-gender="male" data-specialization="urologist">
                <div class="specialist-image">
                    <a href="{% url 'HanYmar' %}">
                        <img src="{% static 'images/specialist-2.png' %}" alt="Хан Умар Хаят">
                        <div class="experience-badge">Стаж 25 лет</div>
                    </a>
                </div>
                <div class="specialist-info">
                    <h3>Хан<br>Умар Хаят</h3>
                    <p class="specialist-position">Андролог, главный врач, уролог</p>

                    <button class="btn btn-primary appointment-btn" onclick="openAppointmentModal(this)">Записаться</button>

                </div>
            </div>

            <div class="specialist-card" data-gender="female" data-specialization="gynecologist">
                <div class="specialist-image">
                    <a href="{% url 'HanTulpan' %}">
                        <img src="{% static 'images/specialist-3.png' %}" alt="Хан Тюльпан Тимергалиевна">
                        <div class="experience-badge">Стаж 27 лет</div>
                    </a>

                </div>
                <div class="specialist-info">
                    <h3>Хан<br>Тюльпан Тимергалиевна</h3>
                    <p class="specialist-position">Акушер-гинеколог, врач УЗИ, генеральный директор, гинеколог</p>
                    <button class="btn btn-primary appointment-btn" onclick="openAppointmentModal(this)">Записаться</button>
                </div>
            </div>

            <div class="specialist-card" data-gender="female" data-specialization="therapist">
                <div class="specialist-image">
                    <a href="{% url 'BasharovaAlena' %}">
                        <img src="{% static 'images/specialist-4.png' %}" alt="Башарова Альбина Шарипяновна">
                        <div class="experience-badge">Стаж 15 лет</div>
                    </a>
                    <img src="{% static 'images/specialist-4.png' %}" alt="Башарова Альбина Шарипяновна">
                    <div class="experience-badge">Стаж 15 лет</div>
                </div>
                <div class="specialist-info">
                    <h3>Башарова<br>Альбина Шарипяновна</h3>
                    <p class="specialist-position">Врач УЗИ, врач функциональной диагностики, кардиолог, терапевт</p>
                    <button class="btn btn-primary appointment-btn" onclick="openAppointmentModal(this)">Записаться</button>
                </div>
            </div>

            <div class="specialist-card" data-gender="male" data-specialization="surgeon">
                <div class="specialist-image">
                    <img src="{% static 'images/specialist-5.png' %}" alt="Мартьянов Иван Сергеевич">
                    <div class="experience-badge">Стаж 6 лет</div>
                </div>
                <div class="specialist-info">
                    <h3>Мартьянов<br>Иван Сергеевич</h3>
                    <p class="specialist-position">Хирург</p>
                    <button class="btn btn-primary appointment-btn" onclick="openAppointmentModal(this)">Записаться</button>
                </div>
            </div>

            <div class="specialist-card" data-gender="male" data-specialization="proctologist">
                <div class="specialist-image">
                    <a href="{% url 'Uldashev' %}">
                        <img src="{% static 'images/specialist-6.png' %}" alt="Юлдашев Фарход Талибович">
                        <div class="experience-badge">Стаж 14 лет</div>
                    </a>

                </div>
                <div class="specialist-info">
                    <h3>Юлдашев<br>Фарход Талибович</h3>
                    <p class="specialist-position">Проктолог, эндоскопист</p>
                    <button class="btn btn-primary appointment-btn" onclick="openAppointmentModal(this)">Записаться</button>
                </div>
            </div>
        </div>

        <div class="show-more">
            <button class="btn btn-secondary">Показать ещё</button>
        </div>
    </div>
</section>

<!-- Модальное окно записи к врачу -->
<div id="appointmentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-search">
                <input type="text" placeholder="Поиск">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 16C13.4183 16 17 12.4183 17 8C17 3.58172 13.4183 0 9 0C4.58172 0 1 3.58172 1 8C1 12.4183 4.58172 16 9 16Z" stroke="#999999" stroke-width="2"/>
                    <path d="M15 14L19 18" stroke="#999999" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="gender-filters">
                <label class="gender-option">
                    <input type="checkbox" checked>
                    <span>Все</span>
                </label>
                <label class="gender-option">
                    <input type="checkbox">
                    <span>Мужчина</span>
                </label>
                <label class="gender-option">
                    <input type="checkbox">
                    <span>Женщина</span>
                </label>
            </div>
        </div>

        <div class="modal-body">
            <div class="specializations-list">
                <label class="specialization-item">
                    <input type="checkbox">
                    <span>Абдоминальный хирург</span>
                </label>
                <label class="specialization-item">
                    <input type="checkbox">
                    <span>Акушер-гинеколог</span>
                </label>
                <label class="specialization-item">
                    <input type="checkbox">
                    <span>Аллерголог-иммунолог</span>
                </label>
                <label class="specialization-item">
                    <input type="checkbox">
                    <span>Аллерголог</span>
                </label>
                <label class="specialization-item">
                    <input type="checkbox">
                    <span>Андролог</span>
                </label>
            </div>

            <div class="appointment-section">
                <h3>Запись на приём к врачу</h3>
                <div class="doctor-info">
                    <img src="{% static 'images/specialist-4.png' %}" alt="Башарова Альбина Шарипяновна" class="doctor-avatar">
                    <div class="doctor-details">
                        <h4>Башарова<br>Альбина Шарипяновна</h4>
                        <p>Врач УЗИ, врач функциональной диагностики, кардиолог, терапевт</p>
                    </div>
                </div>

                <div class="clinic-location">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 2C7.79086 2 6 3.79086 6 6C6 8.20914 7.79086 10 10 10C12.2091 10 14 8.20914 14 6C14 3.79086 12.2091 2 10 2Z" stroke="#00C087" stroke-width="2"/>
                        <path d="M10 18C10 18 16 12 16 6C16 2.68629 13.3137 0 10 0C6.68629 0 4 2.68629 4 6C4 12 10 18 10 18Z" stroke="#00C087" stroke-width="2"/>
                    </svg>
                    <div>
                        <strong>МедХан</strong>
                        <p>Набережные Челны, 52-й комплекс, 20А</p>
                    </div>
                </div>

                <div class="services-prices">
                    <div class="service-item">
                        <span>Врач УЗИ</span>
                        <span>от 2500 ₽</span>
                    </div>
                    <div class="service-item">
                        <span>Врач функциональной диагностики</span>
                        <span>от 2500 ₽</span>
                    </div>
                    <div class="service-item">
                        <span>Кардиолог</span>
                        <span>от 2500 ₽</span>
                    </div>
                    <div class="service-item">
                        <span>Терапевт</span>
                        <span>от 2500 ₽</span>
                    </div>
                </div>

                <div class="appointment-date">
                    <a href="#" class="date-link">9 апреля (ср)</a>
                </div>

                <div class="time-slots">
                    <button class="time-slot">14:30</button>
                    <button class="time-slot">15:20</button>
                    <button class="time-slot">16:10</button>
                    <button class="time-slot">17:00</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function openAppointmentModal(button) {
    document.getElementById('appointmentModal').style.display = 'flex';
}

// Закрытие модального окна при клике вне его
window.onclick = function(event) {
    const modal = document.getElementById('appointmentModal');
    if (event.target === modal) {
        modal.style.display = 'none';
    }
}

// Фильтрация специалистов
document.getElementById('gender-filter').addEventListener('change', filterSpecialists);
document.getElementById('specialization-filter').addEventListener('change', filterSpecialists);
document.getElementById('doctor-search').addEventListener('input', filterSpecialists);

function filterSpecialists() {
    const genderFilter = document.getElementById('gender-filter').value;
    const specializationFilter = document.getElementById('specialization-filter').value;
    const searchQuery = document.getElementById('doctor-search').value.toLowerCase();

    const cards = document.querySelectorAll('.specialist-card');

    cards.forEach(card => {
        const gender = card.dataset.gender;
        const specialization = card.dataset.specialization;
        const name = card.querySelector('h3').textContent.toLowerCase();
        const position = card.querySelector('.specialist-position').textContent.toLowerCase();

        let show = true;

        if (genderFilter && gender !== genderFilter) show = false;
        if (specializationFilter && specialization !== specializationFilter) show = false;
        if (searchQuery && !name.includes(searchQuery) && !position.includes(searchQuery)) show = false;

        card.style.display = show ? 'block' : 'none';
    });
}

// Алфавитный фильтр
document.querySelectorAll('.alphabet-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        document.querySelectorAll('.alphabet-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');

        const letter = this.dataset.letter;
        const cards = document.querySelectorAll('.specialist-card');

        cards.forEach(card => {
            const name = card.querySelector('h3').textContent;
            if (letter === '' || name.startsWith(letter)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    });
});
</script>
{% endblock %}